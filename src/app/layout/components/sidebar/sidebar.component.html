<nav [ngClass]="_menuService.showSideBar ? 'w-[256px]' : 'w-[70px]'"
  class="hidden h-full bg-background transition-all duration-300 lg:block bg-white">
  <div class="h-full">
    <!-- Logo -->
    <div class="relative flex items-center justify-between px-6 pt-5 pb-10">
      <div class="">
        <!-- logo goes here -->
        <img src="assets/images/Logo.svg" alt="Law8 Logo" style="width: 135px; height: 48px" />
      </div>
      <i class="icon-split-screen text-borderPrimary cursor-pointer text-2xl"></i>
    </div>
    <div
      class="h-3/4 flex-col overflow-auto overflow-x-hidden transition-all duration-300 scrollbar-thin scrollbar-thumb-rounded scrollbar-track-rounded scrollbar-track-transparent scrollbar-thumb-muted">
      <!-- Menu Items -->
      <div *ngFor="let menu of _menuService.pagesMenu">
        <ul class="flex flex-col space-y-1">
          <!-- List items -->
          <li *ngFor="let item of menu.items">
            <!-- Menu List -->
            <div (click)="toggleMenu(item)" class="group relative z-20 text-textTertairy">
              <!-- Icon -->
              <div [ngClass]="{
                 

                  'ms-6': _menuService.showSideBar,
                  'ms-2.5': !_menuService.showSideBar
                }"
                class="pointer-events-none absolute start-0 top-2 m-2 text-textTertairy transition-all duration-200 group-hover:text-primary font-medium">
                <i class="text-2xl text-textTertairy" [ngClass]="{
 '!text-primary': isActive(item.route) && !item.children?.length,
                }" [class]="item.icon||''"></i>
              </div>

              <!-- Condition -->
              <ng-container [ngTemplateOutlet]="item.children ? childMenu : parentMenu"
                [ngTemplateOutletContext]="{ item: item }">
              </ng-container>

              <!-- Workaround:: Enable routerLink -->
              <ng-template #parentMenu let-item="item">
                <div routerLink="{{ item.route }}" routerLinkActive="!text-primary"
                  class="peer flex cursor-pointer items-center rounded py-3.5 text-base font-medium leading-none text-textTertairy transition-all duration-200 hover:text-primary">
                  <a class="ms-14 truncate text-start text-sm font-medium tracking-wide focus:outline-none">
                    {{ item.label | translate }}
                  </a>
                </div>
              </ng-template>

              <!-- Workaround:: Disable routerLink -->
              <ng-template #childMenu let-item="item">
                <div
                  class="peer flex cursor-pointer items-center rounded py-3.5 text-sm font-medium leading-none text-textTertairy transition-all duration-200  hover:text-primary">
                  <a
                    class="ms-10 truncate ps-3.5 text-sm font-medium tracking-wide text-textTertairy transition-all duration-200 focus:outline-none group-hover:text-primary">
                    {{ item.label | translate }}
                  </a>
                </div>
              </ng-template>

              <!-- Arrow Icon -->
              <button *ngIf="item.children" [ngClass]="{
                  hidden: !_menuService.showSideBar,
                  'rotate-90': item.expanded,
                  'rotate-180': _languageService.getSelectedLanguage() === 'ar'
                }"
                class="pointer-events-none absolute end-0 top-4 flex items-center p-1 text-textTertairy transition-all duration-500">
                <i class="icon-arrow-right text-xs transition-all duration-200 group-hover:text-primary"></i>
              </button>

              <!-- Tooltip -->
              <div class="fixed w-full" *ngIf="!_menuService.showSideBar">
                <span
                  class="z-1 absolute -top-[34px] start-14 w-auto min-w-max origin-left scale-0 rounded-md bg-foreground p-2 text-xs font-bold text-background shadow-md transition-all duration-200 group-hover:scale-100">
                  {{ item.label | translate }}
                </span>
              </div>
            </div>

            <!-- Submenu items -->
            <div class="max-h-0 overflow-hidden ps-8 pt-1 transition-all duration-500" [ngClass]="{
                hidden: !_menuService.showSideBar,
                'max-h-screen': item.expanded
              }">
              <ul class="flex flex-col text-subtitle relative" [class]="
                  _languageService.getSelectedLanguage() === 'ar'
                    ? 'pr-2'
                    : 'pl-2'
                ">
                <li *ngFor="let sub of item.children" class="before:border-b before:border-textTertairy before:absolute before:w-[25px] before:h-[40px] before:border-l before:rounded-bl before:top-[-20px] before:left-[2px]">
                  <div class="flex items-center rounded ps-2 text-subtitle hover:bg-bodyBg hover:text-foreground">
                    <!-- Condition -->
                    <ng-container [ngTemplateOutlet]="sub.children ? childMenu : parentMenu"
                      [ngTemplateOutletContext]="{ sub: sub }">
                    </ng-container>

                    <!-- Parent Menu -->
                    <ng-template #parentMenu let-sub="sub">
                      <i [class]="sub.icon" [ngClass]="{
                          'text-primary': isActive(sub.route)
                        }"></i>
                      <a [routerLink]="sub.route" routerLinkActive="text-primary"
                        [routerLinkActiveOptions]="{ exact: true }"
                        class="inline-block w-full px-4 py-2 text-xs font-medium">
                        {{ sub.label | translate }}
                      </a>
                    </ng-template>

                    <!-- Child Menu -->
                    <ng-template #childMenu let-sub="sub">
                      <a class="inline-block w-full cursor-pointer px-4 py-2 text-xs font-semibold">
                        {{ sub.label | translate }}
                      </a>
                      <button [ngClass]="{
                          hidden: !_menuService.showSideBar,
                          'rotate-90': sub.expanded
                        }" class="flex items-center p-1 text-subtitle transition-all duration-500">
                        <i class="icon-arrow-right text-xs"></i>
                      </button>
                    </ng-template>
                  </div>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div
      class="border-t border-dividerColor flex cursor-pointer items-center rounded py-3.5 font-medium transition-all duration-200 hover:text-primary">
      <div class="flex items-center" [ngClass]="{
          'ms-6': _menuService.showSideBar,
          'ms-2.5': !_menuService.showSideBar
        }">
        <i class="icon-logout"></i>
      </div>
      <div>
        <div class="ms-3 truncate text-base font-medium tracking-wide focus:outline-none"
          *ngIf="_menuService.showSideBar">
          {{ "menu.logOut" | translate }}
        </div>
      </div>
      <div class="fixed w-full" *ngIf="!_menuService.showSideBar">
        <span
          class="z-1 absolute -top-[34px] start-14 w-auto min-w-max origin-left scale-0 rounded-md bg-foreground p-2 text-xs font-bold text-background shadow-md transition-all duration-200 group-hover:scale-100">
          {{ "menu.logOut" | translate }}
        </span>
      </div>
    </div>
  </div>
</nav>